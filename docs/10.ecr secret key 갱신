# ğŸ”¥ 1. ê¸°ì¡´ ecr-registry Secret ì‚­ì œ
kubectl delete secret ecr-registry -n fastapi || true
kubectl delete secret ecr-registry -n kube-system || true

# ğŸ” 2. fastapi ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì¬ìƒì„±
aws ecr get-login-password --region ap-northeast-2 | \
kubectl create secret docker-registry ecr-registry \
  --docker-server=329599615061.dkr.ecr.ap-northeast-2.amazonaws.com \
  --docker-username=AWS \
  --docker-password=$(aws ecr get-login-password --region ap-northeast-2) \
  -n fastapi

# ğŸ” 3. kube-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì¬ìƒì„±
aws ecr get-login-password --region ap-northeast-2 | \
kubectl create secret docker-registry ecr-registry \
  --docker-server=329599615061.dkr.ecr.ap-northeast-2.amazonaws.com \
  --docker-username=AWS \
  --docker-password=$(aws ecr get-login-password --region ap-northeast-2) \
  -n kube-system

# í‚¤ìƒì„± í™•ì¸
kubectl get secret -n fastapi | grep ecr
kubectl get secret -n kube-system | grep ecr


í¬ë¡ ì¡ ìƒíƒœ í™•ì¸ (ë®ì–´ì“°ê¸°)
kubectl get cronjobs -n kube-system

í¬ë¡ ì¡ ìˆ˜ë™ì‹¤í–‰
kubectl create job --from=cronjob/ecr-token-refresher ecr-token-refresher-manual-$(date +%s) -n kube-system

íŒŒë“œìƒì„± í™•ì¸ 
kubectl get pods -n kube-system

íŒŒë“œ ë¡œê·¸ í™•ì¸
kubectl logs ecr-token-refresher-manual-1745946491-fwltv -n kube-system

fastapi ìš© namespaceì—ì„œ ì‹œí¬ë¦¿í‚¤ ë³µì œ
kubectl get secret byhyeon-secret -n fastapi -o yaml > byhyeon-secret.yaml

kubectl get secret byhyeon-secret -n kube-syste

kubectl get secret byhyeon-secret -n fastapi